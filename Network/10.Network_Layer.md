### 네트워크 계층

- 역할

  - OSI 7 계층의 3계층으로 패킷 포워딩과 네트워크간 라우터를 통한 라우팅 수행
  - IP 주소를 사용하여 통신, 계층적 구조
  - 대표적인 장비는 라우터, 또는 L3라고 부른다.

  ![image-20201001213616386](images\image-20201001213616386.png)

#### IP 정의와 구조

- IP (Internet Protocol)

  - 네트워크 계층에서 통신하는 주요 프로토콜로 라우팅을 구현하고 본질적인 인터넷을 구축하는 계기
  - 전송 제어 프로그램의 비연결 데이터그램 서비스로 시작 -> 연결 지향 서비스로 보완
  - 현재 사용중인 버전은 IPV4이며 후속 버전으로 IPv6 배포

- IP 주소 확인

  - CMD > Ipconfig , Linux > Ifconfig 명령어를 통해서 확인

- IP 구조

  - 헤더와 페이로드로 구성되어 있다.

  ![image-20201001214006150](images\image-20201001214006150.png)

  - 헤더는 목적지 & 출발지 IP 주소 등을 포함, 페이로드는 전송되는 데이터를 의미

- IPv4 헤더 구조

  - 최소 20바이트(옵션 미 지정시)

  ![image-20201001214144671](images\image-20201001214144671.png)

  - Version: IP 버전, IPv4
  - Header Length(HLEN) : 헤더의 길이, 4바이트 단위 최소 5~ 15
  - Type of Service: 서비스 품질
  - Total Packet Length: IP 패킷 전체의 길이 - 바이트 단위 
  - Identifier, Flags, Offset : IP Fragment 필드로 단편화와 재조합, 큰 패킷이 작은 패킷으로 전송 되는 경우
  - Time to Live : IP 패킷 수명
  - Protocol ID: 데이터에 포함되어 있는 상위 계층의 프로토콜 정보, TCP 6, UDP 17
  - Source, Destination IP Address: 출발지 & 목적지 ip 주소

#### IP 주소 클래스

- IP 주소 구성
  - IP 주소는 2진수 32비트로 구성
    - 총 2의 32승
    - 현재는 거의 고갈된 상태
    - 한국인터넷정보센터에서 IP 주소 할당 확인
  - 2진수는 어렵기 때문에 일반적으로 10진수로 표현
    - 168.126.63.1
  - 2의 8승은 256 = 10진수 한 옥텟은 최대 0~255까지 가능

- 네트워크와 호스트

  - IP 주소는 네트워크 부분과 호스트 부분으로 나뉜다
  - 네트워크는 브로드캐스트 영역, 호스트는 개별 단말기
    - 192.168.1.0~255 = 192.168.1 부분 : 네트워크 , 0~255 = 호스트
  - 예를 들어, 경기도는 수원,안양,용인시로 구성되어있다고 가정
  - 같은 수원시에 사는 철수와 민수는 시내버스를 타고 만난다.
  - 하지만 안양시에 사는 영희를 만나기 위해서는 시외버스를 타야한다.

  ![image-20201001214927767](images\image-20201001214927767.png)

  - 수원,안양,용인 = 네트워크 = 라우터
  - 철수, 민수,영희 - 호스트  PC
  - 시내버스 = 브로드캐스트 스위칭, 시외버수 = 라우팅
  - 다른 네트워크끼리는 라우팅이 필요하다.

- IP 주소 클래스

  - IP주소는 네트워크 크기에 따라 5개의 클래스(A,B,C,D,E)로 구분
  - A클래스 : 0.0.0.0 ~ 127.255.255.255, 호스트는 2의 24승

  ![image-20201001215249612](images\image-20201001215249612.png)

  - B클래스: 128.0.0.0 ~ 191.255.255.255, 호스트는 2의 16승

  ![image-20201001215304662](images\image-20201001215304662.png)

  - C클래스: 192.0.0.0 ~ 223.255.255.255, 호스트는 2의 8승 256개

  ![image-20201001215319197](images\image-20201001215319197.png)

  - D & E 클래스 : 멀티캐스트용과 연구용